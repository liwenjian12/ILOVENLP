# Hough Transform(霍夫变换）
在图像中快速识别出其中的圆和直线
<!--TOC-->
- [霍夫变换的目的和主要原理](#霍夫变换的目的和主要原理)
- [霍夫线变换](#霍夫线变换)
- [霍夫圆变换](#霍夫圆变换)
<!--/TOC-->

## 霍夫变换的目的和主要原理
在许多应用场合需要快速准确地检测出直线或者圆，最基本的霍夫变换是从黑白图像中检测直线（线段）
主要原理：运用两个坐标空间之间的变换将在一个空间中具有相同相撞的曲线或直线映射到另一个坐标空间的一个点上形成峰值，从而把检测任意形状的问题转化为统计峰值问题。
线变换：
## 霍夫线变换
霍夫线变换是一种在图像中寻找直线的方法。OpenCV中支持三种霍夫线变换，分别是标准霍夫线变换、多尺度霍夫线变换、累计概率霍夫线变换。
在OpenCV中可以调用函数HoughLines来调用标准霍夫线变换和多尺度霍夫线变换。HoughLinesP函数用于调用累积概率霍夫线变换。
 ** 线的表示方法 **
 笛卡尔： y = k * x + b;
 极坐标： RO = r * cos(theta) + r * sin(theta)
 **调整阈值，直线的角度 **：
 ![](https://github.com/liwenjian12/opencv/blob/master/pictures/1093303-20170520110624135-334688775.png)
 ![](https://github.com/liwenjian12/opencv/blob/master/pictures/1093303-20170520110751947-272430116.png)
 
 ## 霍夫圆变换
 1、 使用cvHoughCircles返回灰度图中找到的圆序列；
 2、 载入一个包括清晰直线和圆的图像，比如一辆侧面看的自行车，调用霍夫直线变换和霍夫圆变换处理这幅图像；
 3、 利用霍夫变换识别不同周长的任意形状；
 
 ## 霍夫梯度法原理（检测圆）
  I、估计圆心
         1、把原图做一次Canny边缘检测，得到边缘检测的二值图
         2、对原始图像执行一次Sobel算子，计算出所有像素的邻域梯度值
         3、初始化圆心空间N(a,b)，令所有的N(a,b)=0
         4、遍历Canny边缘二值图中的所有非零像素点，沿着梯度方向画线，将线段经过的所有累加器中的点(a,b)的N(a,b)+=1
         5、统计排序N(a,b)，得到可能的圆心
  II、估计半径（针对某一个圆心a,b）
         1、计算Canny图中所有非0点距离圆心的距离
         2、距离从小到大排序，根据阈值，选取合适的可能半径（比如3和3.5都被划为半径值3中）
         3、初始化半径空间r,N(r)=0
         4、遍历Canny图中的非0点，对于点所满足的半径r，N(r)+=1
         5、统计得到可能的半径值
  利用霍夫变换检测其他图形的原理也是这样。找出表达式以及参数空间，遍历图像，找出参数空间中符合要求的参数。最近，看到一个利用最小二乘去寻找圆的算法，那个算法的大致思路是列出圆形的表达式，然后通过最小二乘去求迭代求解参数值。这个方案认为更适合解决，利用图像中的点尽可能去拟合一个圆或者几个圆，不适合检测图像中有多少个圆，而且最小二乘的计算量感人。
